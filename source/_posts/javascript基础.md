---
title: javascript基础
date: 2020-12-02 21:11:17
tags: javascript基础
keywords: 执行上下文
categories: 笔记
---
## 执行上下文
1. 代码分类
   * 全局代码
   * 函数代码（局部）

2. 全局执行上下文

     * 在执行全局代码前将window确定为全局执行上下文
     * 对全局数据进行预处理   变量提升
       * var 定义的全局变量==> undefined，添加为window的属性。
       * function声明的全局函数==> 赋值（fun）, 添加为window的方法。 同样会提升
       * this ==> 赋值window

    * 开始执行全局代码

3. 函数执行上下文

     * 在调用函数，准备执行函数体之前，创建对应的函数执行上下文对象（虚拟的，存在于栈里面）
     * 对局部数据进行预处理   函数提升
       * 形参变量 ==> 赋值（实参）==> 添加为执行上下文的属性
       * argument ==> 赋值(实参列表)， 添加为执行上下文的属性
       * var 定义的局部变量==> undefined, 添加为执行上下文的属性
       * function声明的函数 ==> 赋值（fun），添加为执行上下文的方法
       * this ==> 赋值（调用函数的对象） 

## 执行上下文栈
1. 在全局代码执行前，JS引擎就会创建一个栈来存储管理所有的执行上下文对象
2. 在全局执行上下文（window）确定后，将其添加到栈中（压栈）
3. 在函数执行上下文创建之后，将其添加到栈中（压栈）
4. 在当前函数执行完之后，将栈顶的对象移除（弹栈）
5. 当所有代码执行完之后，栈中只剩window

## 注意
 1. 先变量提升，再函数提升
 2. 初始化在所有变量提升之后