---


title: 兄弟连Linux笔记
date: 2020-12-23 23:30:00
tags: linux
categories: 笔记
---
# 兄弟连Linux笔记
## 3.1 注意
* Linux 严格区分大小写

* Linux中所有内容以文件形式保存，包括硬件
  * 硬盘文件是/dev/sd[a-p]
  * 光盘文件是/dev/sr0等
  
* Linux不靠扩展名区分文件类型
  * 压缩包："*.gz"、"*.bz2" "*.tar.bz2"、"*.tgz"等
  * 二进制软件包： ".rpm"
  * 网页文件："*.html"、"*.php"
  * 脚本文件："*.sh" 
  * 配置问价："*.conf"
  
* Linux所有的存储设备都必须挂载之后用户才能是哦那个，包括硬盘、U盘和光盘

* Windows下的程序不能直接在Linux中安装和运行

## 3.2 服务器管理和维护建议

### 1. 目录及作用

| 目录名       | 目录作用                                                     |
| ------------ | ------------------------------------------------------------ |
| /bin/        | 存放系统命令的目录，普通用户和超级用户都可以执行。不过放在/bin下的命令在单用户模式下也可以执行 |
| /sbin/       | 保存和系统环境设置相关的命令，只有超级用户可以使用这些命令进行系统环境设置，但是有些命令可以允许普通用户查看 |
| /usr/bin     | 存放系统命令的目录，普通用户和超级用户都可以执行，这些命令和系统执行无关，在单用户模式下不能执行 |
| /usr/sbin/   | 存放根文件系统不必要的系统管理命令，例如多数服务程序。只有超级用户可以使用。大家其实可以注意到Linux的系统，在所有”sbin“目录中保存的命令只有超级用户可以使用，”bin"目录中保存的命令所有用户都能使用 |
| /boot/       | 系统启动目录，保存系统启动相关文件，如内核文件和启动引导程序（grub）文件等 |
| /dev/        | 设备文件保存位置，我们已将说过Linux中的所有内容以文件的形式保存，包括硬件，那么这个目录就是用来保存所有硬件设备文件的 |
| /etc/        | 配置文件保存位置，系统内所有采用默认安装方式（rpm安装）的服务的配置文件全部都保存在这个目录当中，如用户的账户和密码，服务的启动脚本，常用服务的配置文件 |
| /home/       | 普通用户的家目录。建立每个用户时，每个用户要有一个默认登陆位置，这个位置就是这个用户的家目录，所有普通用户的家目录就是在/home下建立一个和用户名相同的目录。如果user1的家目录就是/home/user1 |
| /lib/        | 系统调用函数的库保存位置                                     |
| /lost+found/ | 当系统意外崩溃或及其意外关机，而产生一些文件碎片放在这里。当系统启动的过程中fsck（file system check）工具会检查这里，并修复已经损坏的文件系统。这个目录只在每个分区中出现，例如/lost+found就是根分区的备份恢复目录，/boot/lost+found/就是/boot分区的备份恢复目录 |
| /media/      | 挂载目录。系统建议是用来挂载媒体设备的，例如软盘和光盘       |
| /mnt/        | 挂载目录。早期Linux中只有这一个挂载目录，并没有细分。现在这个目录系统建议挂载额外设备，如U盘，移动硬盘和其他操作系统分区 |
| /misc/       | 挂载目录。系统建议用来挂载NFS服务的共享目录。只要是一个已经建立的空目录就可以作为挂载点。虽然操作系统准备了三个默认的挂载目录/media、/mnt/、/misc，但是到底在哪个目录中挂载什么设备都可以由管理员自己决定。 |
| /opt/        | 第三方安装的软件保存的位置。这个目录就是放置和安装其他软件的位置，手工安装的源码包软件都可以安装到这个目录中。不过我更习惯把软件放置到/usr/local/目录中，也就是说/usr/local/目录也可以用来安装软件。 |
| /proc/       | 虚拟文件系统，该目录中的数据并不保存到硬盘当中，而是保存内存当中。主要保存系统的内核，进程，外部设备状态和网络状态灯。如/proc/cpuInfo是保存CPU信息的，/proc/devices是保存设备去顶的列表的，/proc/filesystems是保存文件系统列表的，/proc/net/是保存网络协议的。 |
| /sys/        | 虚拟文件系统。和/proc目录相似，都是保存在内存当中的，主要保存于内核相关信息的 |
| /root/       | 超级用户的家目录。普通用户家目录在”/home“下，超级用户家目录直接在”/“下。 |
| /srv/        | 服务数据目录。一些系统服务启动之后，可以在这个目录中保存所需要的数据 |
| /tmp/        | 临时目录。系统存放临时文件的目录，该目录下所有用户都可以访问和写入。我们建议此目录中不能保存重要数据，最好每次开机都把该目录清空 |
| /usr/        | 系统软件资源目录。注意usr 不是user的缩写，而是”Unix software Resource“的缩写，所以不是存放用户数据，而是存放系统软件资源的目录。系统中安装的软件大多数保存在这里，所以除了/usr/bin/和/usr/sbin/这两个目录，再介绍几个/usr/下的二级目录 |
| /var/        | 动态数据保存位置。主要保存缓存、日志以及软件运行所产生的文件 |



### 2. 服务器注意事项

* 远程服务器不允许关机，只能重启
* 重启之前应该关闭服务
* 不要在服务器访问高峰运行高负载命令（大文件扫描、大文件压缩复制等）
* 远程配置防火墙时候不要把自己提出服务器
* 指定合理的密码规范并定期更新
* 合理分配权限
* 定期备份重要数据和日志



## 4. Linux 常用命令

### 4.1 文件处理命令

#### 4.1.1 命令格式与目录处理命令ls

命令格式： 命令 [-选项] [参数]

​	例： ls -la /etc

说明： 

1. 个别命令使用不遵循此格式

2. 当有多个选项时，可以写在一起
3. 简化选项与完场选项 -a 等于 --all

**ls**

```shell
ls // 显示目录
ls -a // 查看所有文件，可看到隐藏文件，为了告诉用户不可轻易操纵 .开头的就是隐藏文件
ls -l // 长格式显示 
	-rw-------. 1 root root  1208 12月 23 08:33 anaconda-ks.cfg
	文件权限 引用次数 文件所有者 文件所属组 文件的大小（默认字节） 最后一次修改时间 文件名
    -rw-r--r--
    -: 文件 d: 目录 l: 软连接
    r: 读 w: 写 x: 执行
    rw- r-- r--
    u所有者 g所属组 o其他人

ls -ld /etc d: 显示目录本身，而不显示目录下的数据

ls -i i: 文件的i节点

```

#### 4.1.2 目录处理命令

**mkdir**

```shell
mkdir /tmp/xiaodianying
mkdir /tmp/japan/boduo // 无法创建需要加参数 -p
mkdir -p /tmp/japan/boduo // 递归创建
mkdir /tmp/japan/cangjin /temp/japan/longze/  // 同时创建多个目录
```

**cd**(change directory)

```sh
cd 目录名称

```

**pwd**(print working directory)

```shell
pwd // 显示完整目录
```

**.** 表示当前目录

**..** 表示当前目录的上级目录

**rmdir** (remove empty directory) 删除空目录

```shell
rmdir 目录名
```

**cp** (copy) 复制

```shell
cp -rp [原文件或目录] [原文件目录] ... [目标目录]
   -r 复制目录 可以更改文件名
   -p 保留文件属性
```

**mv**(move) 剪切、改名

```shell
mv [原文件或目录] [目标目录]
```

**rm**(remove) 删除文件或目录

```shell
rm -rf [文件或目录]
   -r 删除目录
   -f 强制删除
```



#### 4.1.3 文件处理命令

**touch** 创建空文件

```shell
touch [文件名]
```

**cat**显示文件内容

```shell
cat [文件名]
cat -n [文件名] // 查看文件内容 带行号
cat 
```

**tac** 与cat一直  反向显示命令 不支持-n

**more** 分页显示文件内容

```shell
more [文件名]
（空格）或f  翻页
（enter）   换行
  q或Q	   退出
```

**less 分页显示内容**

```shell
于more一样但是多了以下命令
b 向上翻页
上箭头 向上找
/搜索内容   ; n next 下一条 p preview 上一条
```

**head** 显示文件前面几行

```shell
head [文件名]
-n 指定行数
```

**tail**显示末尾几行

```shell
tail [文件名]
-n 指定行数
-f 动态显示
```

#### 4.1.4 链接命令

**ln**(link) 生成链接文件

```shell
ln -s [原文件] [目标文件]
   -s 创建软连接（类似windows快捷方式）
ln [原文件] [目标文件] // 相当于拷贝cp -p + 同步更新，原文件丢失硬链接也能访问；查看i节点，一个i节点可对应多个文件；不能跨分区；不能针对目录使用
```

### 4.2 权限管理命令

#### 4.2.1 权限管理命令chmod

**chmod** (change the permissions mode of a file) 改变文件或目录的权限

```shell
chmod [{ugoa}{+-=}{rwx}] [文件或目录]
	//[{所有者，用户组，其他人，所有人}{增加权限，减少权限，重写权限}{读，写，执行}]
	  [mode=421] [文件或者目录]
	  -R 递归修改
```

```shell
file:
	r: cat/more/head/tail/less
	w: vim
	x: script command
directory
	r: ls
	w: touch/mkdir/rmdir/rm
	x: cd
```



#### 4.2.2 其他权限管理**命令**

**chown**(change file) 改变文件或者目录的所有者（只有管理员有权限）

```shell
chown [用户] [文件或目录]
```

**chgrp**(change file group ownership) 改变文件或目录的所属组

```shell
chgrp [用户组] [文件或目录]
```

**umask**(the user file-creaation mask): 显示、设置文件的缺省权限

```shell
umask [-S]
	  -S 以rwx形式显示新建文件缺省权限
	  
	 // 更改默认权限 
	 0022
	 0 特殊权限
	 022 --- -w- -w-
	 777 rwx rwx rwx
	 ----------------逻辑与
	 755 rwx r-x r-x 目录
	     rw- r-- r-- 文件
	 
```

### 4.3 文件搜索命令

注意： 规划好目录，少使用搜索，搜索范围越小越好，搜索条件越精确越好

#### 4.3.1 文件搜索命令find

**find**

```shell
find [搜索范围] [匹配的条件]
				-name 文件名    // 只搜索文件
				-name *文件名*  // 使用通配符 查找文件中带字符串中
				（* 匹配任意字符）
				（?匹配一个字符）
				-iname 文件名   // 搜索的时候不区分大小写
				-size +n（大于）|-n（小于）|n等于  // n 数据块 1 数据块 = 512 字节
				-user 文件名   // 根据文件所有者查找
				-group 文件名 	// 根据文件所属组查找
				-cmin -5  // 根据时间查找 5分钟内被修改过属性的文件和目录;+ 表示超过 
				-amin 访问时间 access
				-cmin 文件属性 change
				-mmin 文件内容 modify
				
				-a // and 两个条件同时满足
				-o // or 两个条件满足一个
				
				-type 根据文件类型查找
					  f 文件  d目录  l软连接文件
				-inum 根据i节点查找
				
				-exec/-ok 命令 {}  \; 对搜索结果执行操作
```



#### 4.3.2 其他文件搜索命令

**locate** 在文件资料库中查找文件

```shell
locate 文件名
updatedb 升级文件库，临时文件不会被收录在 文件资料库中
locate -i 文件名 不区分大小写
```

**which** 搜索命令所在目录以及别名信息

```shell
which 命令
```

**whereis** 搜索命令所在目录以及帮助文档路径

```shell
whereis [命令名称]
```

**grep** 在文件中搜寻字串匹配的并行输出

```shell
grep -iv [指定字串] [文件]
	 -i 不区分大小写
	 -v 排除指定字串（^匹配行首）
```

### 4.4 文件搜索命令-帮助命令

#### 4.4.1  帮助命令

**man** (manual) 获得帮助信息 或者配置文件 （优先是命令的帮助1，5表示配置文件）

```shell
man ls // 查看ls命令的帮助信息 浏览的过程类似 less命令
man services // 查看配置文件services的帮助信息
man 5 passwd // 配置文件的帮助信息
```

**whatis** 得到简短的命令信息

```shell
whatis [命令名称]
```

**apropos** 查看配置文件的信息

```shell
apropos [配置文件]
```

--help 获得用户帮助

**help** 获得shell内置命令的帮助信息(找不到路径的命令都是shell的内置命令)

```shell
help [命令]
```

### 4.5 用户管理命令

**useradd** 添加一个用户

```shell
useradd 用户名
```

**passwd** 更改或者设置密码

```shell
passwd 用户名
```

**who** 查看登陆用户信息

```shell
who
```

### 4.6 压缩解压命令

**gzip** 压缩文件  源文件不保存

```shell
gzip 压缩
```

**gunzip** 解压缩.gz的 压缩文件

```shell
gunzip [压缩文件]
```

**tar** 打包目录

```shell
tar 选项[zcf] [压缩后的文件名] [目录]
    -c 打包
    -v 显示详细信息
    -f 指定文件名
    -z 打包同时压缩
```

**tar** 解压缩语法

```shell
tar -x 解包
	-v 显示详细信息
	-f 指定解压文件
	-z 解压缩
```

**zip** 压缩文件或者目录 能保存原文件

```shell
zip 选项[-r] [压缩后文件名] [文件或者目录]
		-r	压缩目录
 
```

**unzip** 解压缩

```shell
unzip 解压缩的文件
```

**bzip2** 压缩文件

```shell
bzip2 选项 [-k] [文件]
			-k 产生压缩文件后保留原文件
			// 压缩后的文件格式 .bz2
```

**bunzip2** 解压缩

``` shell
bunzip2 选项 [-k] [压缩文件]
			  -k 解压缩之后保留原文件
```



### 4.7 网络命令

**write** 给在线用户发信息，以Ctrl+D保存结束后

```shell
write 用户名
```

**wall** （write all）给所有在线用户发广播消息

```shell
write [message]
```

**ping** 测试网络连通性

```shell
ping 选项 ip地址
	 -c 指定发送次数
```

**ifconfig ** interface configure 查看和设置网卡信息

```shell
ifcongfig 网卡名称 ip地址
```

**mail** 查看发送电子邮件

```shell
mail [用户名]
```

**last** 列出目前与过去登陆系统的用户信息

```shell
last
```

**lastlog** 列出所有的用户

```shell
lastlog -u
```

**traceroute** 显示数据包到主句间的路径

```shell
traceroute 
```

**netstat** 显示网络相关信息

```shell
netstat [选项]
		-t   tcp协议
		-u 	 UDP协议
		-l   监听
		-r 	 路由
		-n	 显示IP地址和端口号
		
netstat -tuln // 协议 接收数据包排序 发送数据包排序 本地ip端口 远端ip端口 状态
netstat -an  // 查看所有的监听信息
netstat -rn 查看路由表
```

**setup** 配置网络 永久生效

```shell
setup
```

**mount** 把设备挂载到挂载点

```shell
mount [-t 文件系统] 设备文件名 挂载点
```

**unmount** 卸载
```shell
unmount 设备名或者挂载点
```

 ### 4.8 关机和重启命令

**shutdown** 关机重启命令 推荐使用

```shell
shutdown [选项] 时间
		  -c 取消前一个关机命令
		  -h 关机
		  -r 重启
```

**init 6** 重启， 系统运行级别

```shell
shell 0 关机
	  1 单用户 （启动最核心程序，做修复）
	  2 不完全多用户，不含NFS（network file system）服务
	  3 完全多用户
	  4 未分配
	  5 图形界面
	  6 重启
```

**logout** 退出

## 5文本编辑器vim

### 5.1 Vim常用操作



![](https://cdn.JsDelivr.net/gh/guozhitao-theo/bolg_img/2020-11-01/Screenshot_2020-12-30-23-22-12-76_149003a2d400f6a.jpg)

#### 插入命令

| 命令 | 作用                   |
| ---- | ---------------------- |
| a    | 在光标所在的字符后插入 |
| A    | 在光标的尾行插入       |
| i    | 在光标所在字符前插入   |
| I    | 在光标所在行行首插入   |
| o    | 在光标下插入新行       |
| O    | 在光标上插入新行       |

#### 定位命令
| 命令       | 作用                     |
| ---------- | ------------------------ |
| : set nu   | 设置行号                 |
| : set nonu | 取消行号                 |
| gg<br />G  | 到第一行<br />到最后一行 |
| nG         | 到第n行                  |
| : n        | 到第n行                  |
| $          | 移至行尾                 |
| 0          | 移至行首                 |

#### 删除命令

| 命令     | 作用                         |
| -------- | ---------------------------- |
| x        | 删除光标所在处字符           |
| nx       | 删除光标所在处后n个字符      |
| dd       | 删除光标所在行，ndd删除n行   |
| dG       | 删除光标所在行到文件末尾内容 |
| D        | 删除光标所在处到行尾内容     |
| : n1,n2d | 删除指定范围的行             |

#### 复制和剪切命令

| 命令 | 作用                         |
| ---- | ---------------------------- |
| yy   | 复制当前行                   |
| nyy  | 复制当前行以下n行            |
| dd   | 剪切当前行                   |
| ndd  | 剪切当前行以下n行            |
| p、P | 粘贴在当前光标所在行下或行上 |

#### 替换和取消命令

| 命令 | 作用                                |
| ---- | ----------------------------------- |
| r    | 取代光标所在处字符                  |
| R    | 从光标所在处开始替换字符，按Esc结束 |
| u    | 取消上一步操作                      |

#### 搜索和搜索替换命令

| 命令               | 作用                                         |
| ------------------ | -------------------------------------------- |
| /string            | 搜索指定字符串<br />搜索时忽略大小写: set ic |
| n                  | 搜索指定字符串的下一个出现位置               |
| : %s/old/new/g     | 全文替换指定字符串                           |
| ：n1,n2s/old/new/g | 在一定范围内替换指定字符串                   |

#### 保存和退出命令

| 命令            | 作用                                     |
| --------------- | ---------------------------------------- |
| :w              | 保存修改                                 |
| :w new_filename | 另存为指定文件                           |
| :wq             | 保存修改并退出                           |
| ZZ              | 快捷键，保存修改并退出                   |
| :q!             | 不保存修改退出                           |
| :wq!            | 保存修改并退出（文件所有者及root可使用） |

### 5.2 Vim使用技巧

| 命令                                            | 说明                                                         |
| ----------------------------------------------- | ------------------------------------------------------------ |
| :r 文件名                                       | 将目标文件导入到当前文件光标所在的位置                       |
| :!命令                                          | 找到命令的路径                                               |
| **:r  !命令**                                   | 在不退出vim的情况下将命令执行的结果导入到当前文件光标所在位置 |
| :map ctrl +v+ p 或者ctrl + v ctrl + p   vim命令 | 自定义快捷键                                                 |
| :n1,n2s/^/#/g                                   | 连续行注释（删除同理） 正则匹配                              |
| :ab // 例子： :ab mymail gzt@gmial.com          | 替换                                                         |

### ==保存配置==

家目录下配置文件下修改

比如

```shell
vi /root/.vimrc // 保存编辑模式的命令
/home/用户/.vimrc // 普通用户模式
```



## 6 软件

#### 6.1 软件包管理简介

* 源码包
  * 脚本安装包
* 二进制包（RPM包，系统默认包）

**源码包的优点：**  

	* 开源，如果有足够的能力，可以修改源代码
	* 可以自由选择所需的功能
	* 软件是编译安装，所以更加适合自己的系统，更加稳定效率更高
	* 卸载方便

**源码包的缺点：**  

	* 安装过程步骤较多，尤其安装较大的软件集合时（如LAMP环境搭建）,容易出现拼写错误
	* 编译时间较长，安装比二进制安装时间长
	* 因为是编译安装，安装过程中一旦报错新手跟难解决

**RPM包（二进制包）的优点**

* 包管理系统简单，只通过几个命令就可以实现包的安装、升级、查询卸载
* 安装速度比源码包安装快得多

**RPM包（二进制包）的缺点**

	* 经过编译，不再可以看到源码
	* 功能选择不如源码灵活
	* 依赖性
#### 6.2 RPM包管理命令 - rpm命令管理

##### 6.2.1 RPM 包命名与依赖性

```shell
httpd-2.2.15-15.el6.centos.l.i686.rpm
httpd  			软件包名
2.2.15 			软件版本
15 	  			软件发布次数
el6.centos  	适合Linux平台
i686    		适合的硬件平台
rpm    			rpm扩展名
```

**RPM包依赖性**

* 树形依赖

  a->b->c

* 环形依赖

  a->b->c->a

* 模块依赖

  www.rpmfind.net



##### 6.2.2 rpm命令管理-安装升级与卸载

1. 包全名与包名

   * 包全名：

     操作的包是没有安装的软件包时，使用包全名。而且要注意路径

   * 包名：

     操作已经安装的软件包时，使用包名。是搜索/var/lib/rpm/中的数据库

2. rpm安装

   ```shell
   rpm -ivh 包全名
   选项：
   	-i (install)			安装
   	-v (verbose) 			显示详细信息
   	-h (hash)				显示进度
   	--nodeps				不检测依赖性 
   	
   ```

3. RPM包升级

   ```shell
   rpm -Uvh 包全名
   选项：
   	-U (upgrade) 		升级
   ```

   

4. 卸载

   ```shell
   rpm -e 包名
   选项：
   	-e (erase) 		卸载
   	--nodepe		不检测依赖性 
   ```

   

##### 6.2.3 rpm命令管理-查询

1. 查询是否安装

   ```shell
   rpm - q 包名
   # 查询包是否安装
   选项： 
   	-q 查询（query）
   
   rpm -qa
   # 查询所有已经安装的RPM包
   选项：
   	-a 所有 （all）
   ```

   

2. 查询软件包信息

   ```shell
   rpm -qi 包名
   选项：
   	-i 查询软件信息 （information）
   	-p 查询未安装包信息（package） 
   ```

3. 查询包中文件的安装位置

   ```shell
   rpm -ql 包名
   选项： 
   	-l 列表（list）
   	-p 查询未安装包信息（package）
   ```

4. 查询系统文件属于哪一个RPM包

   ```shell
   rpm -qf 系统文件名
   选项： 
   	-f 查询系统文件属于哪个软件包（file）
   ```

5. 查询软件包的依赖性

   ```shell
   -R 查询软件包的依赖性（requires）
   -p 查询未安装包信息 (package) 
   ```

   

##### 6.2.4 rpm命令管理-校验和文件提取

1. RPM 包校验

   ```shell
   rpm -V 已安装的包名
   选项：
   	-V 校验指定RPM包中的文件（verify）
   ```

   验证内容中的8个信息内容如下：

   	* S	文件大小是否改变
   	* M 文件的类型或文件的权限（rwx）是否被改变
   	* 5 文件MD5校验和是否改变（可以看成文件内容是否改变）
   	* D 设备的中，从代码是否改变
   	* L 文件的路径是否改变
   	* U 文件的属性（所有者）是否改变
   	* G 文件的属组是否改变
   	* T 文件的修改时间是否改变

 **文件类型**

    ```shell
    * c 	配置文件（config file）
    * d     普通文件（documentation）
    * g 	"鬼"文件（ghost file）, 很少见，，就是该文件不应该被这个RPM包包含
    * l		授权文件（license file）
    * r		描述文件（read me）
    ```

2. ROM包中文件提取

   ```shell
   rpm2cpio 包全名 | \
   cpio -idv .文件绝对路径
   
   rpm2cpio
   #将rpm包转换为cpio格式命令
   cpio
   #是一个标准工具，它用于创建软件档案文件和从档案文件中提取文件
   ```

   

   

#### 6.3RPM包 yum在线管理

##### 6.3.1IP地址配置个网络yum 源

```shell
setup
vi /etc/sysconfig/network-scripts/ifcfg-eth0  
# 把ONBOOT="no"改为ONBOOT=“yse"
# 或者
service network restart
```

网络源

```shell
vi /etc/yum.repos.d/CentOS-Base.repo
 * [base]			容器名称，一定要放在[]中
 * name				软件说明，可以自己随便写
 * mirrorlist		镜像站点，这个可以注释掉
 * baseurl			我们的yum源服务器的地址。默认是CentOS官方的yum源服务器，是可以使用的，如果你觉得慢可以改成你喜欢的yum源地址
 * enabled			此容器是否生效，如果不写或者写成enable=1都是生效，写成enable=0就是不生效
 * gpgcheck			如果是1是指RPM的数字证书生效，如果是0则不生效
 * gpgkey			数字证书公钥文件保存位置，不用修改
```

##### 6.3.2 yum命令

1. 常用命令

   * 查询

   ```shell
   
   yum list
   # 查询所有可用软件包列表
   yum search 关键字
   # 搜索服务器上所有和关键字相关的包
   
   
   ```

   * 安装

   ```shell
   yum -y install 包名
   选项：
   	install	   安装
   	-y		   自动回答yes
   ```

   * 升级

   ```shell
   yum -y update 包名
   选项：
   	update		升级
   	-y			自动回答yes
   ```

   * 卸载

   ```shell
   yum -y remove 包名
   选项：
   	remove		卸载
   	-y			自动回答yes
   ```

   

2. YUM 软件组管理命令

   ```shell
   yum grouplist
   # 列出所有可用的软件组列表
   
   yum groupinstall 软件组名
   # 安装指定软件组，组名可以由grouplist查询出来
   
   yum groupremove 软件组名
   # 卸载指定软件组
   ```

##### 6.3.3 yum在线管理-光盘yum源

1. 挂载光盘

   ```shell
   mount /dev/cdrom /mnt/cdrom
   ```

2. 让网络yum源文件失效

   ```SHELL
   cd /etc/yum.repos.d/
   mv CentOs-Base.repo \ CentOS-Base.repo.bak
   mv CentOS-Debuginfo.repo \ CentOS-Debuginfo.repo.bak
   mv CentOS-Vault.repo \ CentOS-Vault.repo.bak
   ```

3. 修改光盘yum源

   ```shell
   vim CentOS-Media.repo 
   	[c6-media] 
   	nme = CentOS-$releasever - Media
   	baseurl=file:///mnt/cdrom
   	# 地址为你自己的光盘挂载地址
   	# file:///media/cdrom
   	# file:///media/cdrecorder
   	# 注释这两个不存在的地址
   	gpgcheck=1
   	enabled=1
   	# 把enable=0改为enable=1，让这个yum源配置文件生效
   	gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
   ```

#### 6.4 源码包与RPM包的区别

##### 6.4.1 源码包与RPM包的区别

1. 区别

   * 安装前的区别： 概念上的区别
   * 安装后的区别： 安装位置不同

2. RPM包安装位置

   **RPM包默认安装路径**

   | /etc/           | 配置文件安装目录           |
   | --------------- | -------------------------- |
   | /usr/bin/       | 可执行的命令安装目录       |
   | /usr/lib/       | 程序所使用的函数库保存位置 |
   | /usr/share/doc/ | 基本的软件使用手册保存位置 |
   | /usr/share/man/ | 帮助文件保存位置           |

3. 源码包安装位置

   * 安装在指定位置当中，一般是/usr/local/软件名/

4. 安装位置不同带来的影响

   * RPM包安装的服务可以使用系统服务管理命令（service）来管理，例如RPM包安装的apache的启动方法是
     * /etc/rc.d/init.d/httpd start
     * service httpd start
   * 而源码包安装的服务则不能被服务管理命令管理，因为没有安装到默认路径中，所以只能用绝对路径进行服务管理，如：
     * /usr/local/apache2/bin/apachectl start

##### 6.4.2 源码包管理

1. 安装准备
   * 安装C语言编译器
   * 下载源码包
2. 安装注意事项
   * 源代码保存位置： /usr/local/src/
   * 软件安装位置：/usr/local/
   * 如何确认安装过程报错：
     * 安装过程停止
     * 并出现error、warning或no的提示
3. 源码包安装过程
   * 下载源码包
   * 解压缩下载的源码包
   * 进入解压缩目录
   * ./configure 软件配置与检查(--prefix=指定路径)
     * 定义需要的功能选项
     * 检测系统环境是否符合安装要求
     * 把定义好的功能选项和检测系统环境的信息都写入Makefile文件，用于后续的编辑。
   * make 编译
     * (若make 报错)make clean
   * make install 编译安装

4. 源码包的卸载
   * 不需要卸载命令，直接删除安装目录即可。不会遗留任何垃圾文件。

#### 6.5 脚本安装包

1. 脚本安装包
   * 脚本安装包并不是独立的软件包类型，常见安装的是源码包
   * 是人为把安装过程写成了自动安装的脚本，只要执行脚本，定义简单的参数，就可以完成安装。
   * 非常类似于Windows下软件的安装方式。
2. Webmin的作用
   * Webmin 是一个基于Web的Linux系统管理界面。您就可以通过图形化的方式设置用户账号、Apache、DNS、文件共享等服务。

3. Webmin安装过程
   * 下载软件
   * 解压缩，并进入解压缩目录
   * 执行安装脚本   

## 7 用户配置文件

### 7.1 用户信息文件

 #### 7.1.1 用户信息文件/etc/passwd

1. 用户管理简介
   *　越是对服务器安全性要求高的服务器，越需要建立合理的用户权限等级制度和服务器操作规范。
   *　在Linux中主要是通过用户配置文件来查看和修改用户信息。

2. /etc/passwd
   * 第1个字段： 用户名称
   * 第2个字段： 密码标志
   * 第3个字段： UID(用户ID)
     * 0：超级用户
     * 1-  499： 系统用户
     * 500 - 65535： 普通用户
   * 第4个字段：GID(用户初始组ID)
   * 第5个字段： 用户说明
   * 第6个字段： 家目录
     * 普通用户： /home/用户名
     * 超级用户：/root/
   * 第7个字段： 登陆之后的Shell
3. 初始组和附加组
   * 初始组： 就是指用户一登陆就立刻拥有这个用户组的相关权限，每个用户的初始组只能有一个，一般就是个这个用户的用户名相同的组名作为这个用户的初始组。
   * 附加组：指用户可以加入多个其他的用户组，并拥有这些组的权限，附加组可以有多个。 

4. Shell是什么
   * Shell就是Linux的命令解释器。
   * 在/etc/passwd当中，除了标准Shell是/bin/bash之外，还可以写如/sbin/nologin。

#### 7.1.2 影子文件/etc/shadow

1. 影子文件

	* 第1个字段： 用户名
     * 第2个字段：加密密码
        * 加密算法升级为SHA512散列加密算法
        * 如果密码位是“!!” 或者“*”代表没有密码，不能登陆。
    * 第3个字段：密码最后一次修改日期
      * 使用1970年1月1日作为标准时间，每过一天时间戳加1  

    * 第4个字段： 两次密码的修改间隔时间（和第3个字段相比较）
    * 第5个字段：密码有效期（和第3个字段相比）
    * 第6个字段： 密码修改到期前的警告天数（和第5个字段相比）

    * 第7个字段： 密码过期后的宽限天数（和第5字段相比）
      * 0： 代表密码过期后立即失效
      * -1： 代表密码永远不会失效
    * 第8个字段： 账号失效时间
      * 要用时间戳表示
    * 第9个字段： 保留

2. 时间戳换算
   * 把时间戳换算成日期
     * date -d "1970-01-01 16066 days"
   * 把日期换算为时间戳
     * echo $((\$(date --date="2014/01/06"+%s)/86400+1))

#### 7.1.3 组信息文件/etc/group和组密码文件/etc/gshadow

1. 组信息文件/etc/group
   * 第1个字段： 组名
   * 第2个字段：组密码标志
   * 第3个字段： GID
   * 第4个字段： 组中附加用户

2. 组密码文件/etc/gshadow
   * 第1个字段： 组名
   * 第2个字段： 组密码
   * 第3个字段： 组管理员用户名
   * 第4个字段： 组中附加用户  