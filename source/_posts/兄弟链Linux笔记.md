---
title: 兄弟连Linux笔记
date: 2020-12-23 23:30:00
tags: linux
categories: 笔记
---
# 兄弟连Linux笔记
## 3.1 注意
* Linux 严格区分大小写

* Linux中所有内容以文件形式保存，包括硬件
  * 硬盘文件是/dev/sd[a-p]
  * 光盘文件是/dev/sr0等
  
* Linux不靠扩展名区分文件类型
  * 压缩包："*.gz"、"*.bz2" "*.tar.bz2"、"*.tgz"等
  * 二进制软件包： ".rpm"
  * 网页文件："*.html"、"*.php"
  * 脚本文件："*.sh" 
  * 配置问价："*.conf"
  
* Linux所有的存储设备都必须挂载之后用户才能是哦那个，包括硬盘、U盘和光盘

* Windows下的程序不能直接在Linux中安装和运行

## 3.2 服务器管理和维护建议

### 1. 目录及作用

| 目录名       | 目录作用                                                     |
| ------------ | ------------------------------------------------------------ |
| /bin/        | 存放系统命令的目录，普通用户和超级用户都可以执行。不过放在/bin下的命令在单用户模式下也可以执行 |
| /sbin/       | 保存和系统环境设置相关的命令，只有超级用户可以使用这些命令进行系统环境设置，但是有些命令可以允许普通用户查看 |
| /usr/bin     | 存放系统命令的目录，普通用户和超级用户都可以执行，这些命令和系统执行无关，在单用户模式下不能执行 |
| /usr/sbin/   | 存放根文件系统不必要的系统管理命令，例如多数服务程序。只有超级用户可以使用。大家其实可以注意到Linux的系统，在所有”sbin“目录中保存的命令只有超级用户可以使用，”bin"目录中保存的命令所有用户都能使用 |
| /boot/       | 系统启动目录，保存系统启动相关文件，如内核文件和启动引导程序（grub）文件等 |
| /dev/        | 设备文件保存位置，我们已将说过Linux中的所有内容以文件的形式保存，包括硬件，那么这个目录就是用来保存所有硬件设备文件的 |
| /etc/        | 配置文件保存位置，系统内所有采用默认安装方式（rpm安装）的服务的配置文件全部都保存在这个目录当中，如用户的账户和密码，服务的启动脚本，常用服务的配置文件 |
| /home/       | 普通用户的家目录。建立每个用户时，每个用户要有一个默认登陆位置，这个位置就是这个用户的家目录，所有普通用户的家目录就是在/home下建立一个和用户名相同的目录。如果user1的家目录就是/home/user1 |
| /lib/        | 系统调用函数的库保存位置                                     |
| /lost+found/ | 当系统意外崩溃或及其意外关机，而产生一些文件碎片放在这里。当系统启动的过程中fsck（file system check）工具会检查这里，并修复已经损坏的文件系统。这个目录只在每个分区中出现，例如/lost+found就是根分区的备份恢复目录，/boot/lost+found/就是/boot分区的备份恢复目录 |
| /media/      | 挂载目录。系统建议是用来挂载媒体设备的，例如软盘和光盘       |
| /mnt/        | 挂载目录。早期Linux中只有这一个挂载目录，并没有细分。现在这个目录系统建议挂载额外设备，如U盘，移动硬盘和其他操作系统分区 |
| /misc/       | 挂载目录。系统建议用来挂载NFS服务的共享目录。只要是一个已经建立的空目录就可以作为挂载点。虽然操作系统准备了三个默认的挂载目录/media、/mnt/、/misc，但是到底在哪个目录中挂载什么设备都可以由管理员自己决定。 |
| /opt/        | 第三方安装的软件保存的位置。这个目录就是放置和安装其他软件的位置，手工安装的源码包软件都可以安装到这个目录中。不过我更习惯把软件放置到/usr/local/目录中，也就是说/usr/local/目录也可以用来安装软件。 |
| /proc/       | 虚拟文件系统，该目录中的数据并不保存到硬盘当中，而是保存内存当中。主要保存系统的内核，进程，外部设备状态和网络状态灯。如/proc/cpuInfo是保存CPU信息的，/proc/devices是保存设备去顶的列表的，/proc/filesystems是保存文件系统列表的，/proc/net/是保存网络协议的。 |
| /sys/        | 虚拟文件系统。和/proc目录相似，都是保存在内存当中的，主要保存于内核相关信息的 |
| /root/       | 超级用户的家目录。普通用户家目录在”/home“下，超级用户家目录直接在”/“下。 |
| /srv/        | 服务数据目录。一些系统服务启动之后，可以在这个目录中保存所需要的数据 |
| /tmp/        | 临时目录。系统存放临时文件的目录，该目录下所有用户都可以访问和写入。我们建议此目录中不能保存重要数据，最好每次开机都把该目录清空 |
| /usr/        | 系统软件资源目录。注意usr 不是user的缩写，而是”Unix software Resource“的缩写，所以不是存放用户数据，而是存放系统软件资源的目录。系统中安装的软件大多数保存在这里，所以除了/usr/bin/和/usr/sbin/这两个目录，再介绍几个/usr/下的二级目录 |
| /var/        | 动态数据保存位置。主要保存缓存、日志以及软件运行所产生的文件 |



### 2. 服务器注意事项

* 远程服务器不允许关机，只能重启
* 重启之前应该关闭服务
* 不要在服务器访问高峰运行高负载命令（大文件扫描、大文件压缩复制等）
* 远程配置防火墙时候不要把自己提出服务器
* 指定合理的密码规范并定期更新
* 合理分配权限
* 定期备份重要数据和日志



## 4. Linux 常用命令

### 4.1 文件处理命令

#### 4.1.1 命令格式与目录处理命令ls

命令格式： 命令 [-选项] [参数]

​	例： ls -la /etc

说明： 

1. 个别命令使用不遵循此格式

2. 当有多个选项时，可以写在一起
3. 简化选项与完场选项 -a 等于 --all

**ls**

```shell
ls // 显示目录
ls -a // 查看所有文件，可看到隐藏文件，为了告诉用户不可轻易操纵 .开头的就是隐藏文件
ls -l // 长格式显示 
	-rw-------. 1 root root  1208 12月 23 08:33 anaconda-ks.cfg
	文件权限 引用次数 文件所有者 文件所属组 文件的大小（默认字节） 最后一次修改时间 文件名
    -rw-r--r--
    -: 文件 d: 目录 l: 软连接
    r: 读 w: 写 x: 执行
    rw- r-- r--
    u所有者 g所属组 o其他人

ls -ld /etc d: 显示目录本身，而不显示目录下的数据

ls -i i: 文件的i节点

```

#### 4.1.2 目录处理命令

**mkdir**

```shell
mkdir /tmp/xiaodianying
mkdir /tmp/japan/boduo // 无法创建需要加参数 -p
mkdir -p /tmp/japan/boduo // 递归创建
mkdir /tmp/japan/cangjin /temp/japan/longze/  // 同时创建多个目录
```

**cd**(change directory)

```sh
cd 目录名称

```

**pwd**(print working directory)

```shell
pwd // 显示完整目录
```

**.** 表示当前目录

**..** 表示当前目录的上级目录

**rmdir** (remove empty directory) 删除空目录

```shell
rmdir 目录名
```

**cp** (copy) 复制

```shell
cp -rp [原文件或目录] [原文件目录] ... [目标目录]
   -r 复制目录 可以更改文件名
   -p 保留文件属性
```

**mv**(move) 剪切、改名

```shell
mv [原文件或目录] [目标目录]
```

**rm**(remove) 删除文件或目录

```shell
rm -rf [文件或目录]
   -r 删除目录
   -f 强制删除
```



#### 4.1.3 文件处理命令

**touch** 创建空文件

```shell
touch [文件名]
```

**cat**显示文件内容

```shell
cat [文件名]
cat -n [文件名] // 查看文件内容 带行号
cat 
```

**tac** 与cat一直  反向显示命令 不支持-n

**more** 分页显示文件内容

```shell
more [文件名]
（空格）或f  翻页
（enter）   换行
  q或Q	   退出
```

**less 分页显示内容**

```shell
于more一样但是多了以下命令
b 向上翻页
上箭头 向上找
/搜索内容   ; n next 下一条 p preview 上一条
```

**head** 显示文件前面几行

```shell
head [文件名]
-n 指定行数
```

**tail**显示末尾几行

```shell
tail [文件名]
-n 指定行数
-f 动态显示
```

#### 4.1.4 链接命令

**ln**(link) 生成链接文件

```shell
ln -s [原文件] [目标文件]
   -s 创建软连接（类似windows快捷方式）
ln [原文件] [目标文件] // 相当于拷贝cp -p + 同步更新，原文件丢失硬链接也能访问；查看i节点，一个i节点可对应多个文件；不能跨分区；不能针对目录使用
```

### 4.2 权限管理命令

#### 4.2.1 权限管理命令chmod

**chmod** (change the permissions mode of a file) 改变文件或目录的权限

```shell
chmod [{ugoa}{+-=}{rwx}] [文件或目录]
	//[{所有者，用户组，其他人，所有人}{增加权限，减少权限，重写权限}{读，写，执行}]
	  [mode=421] [文件或者目录]
	  -R 递归修改
```

```shell
file:
	r: cat/more/head/tail/less
	w: vim
	x: script command
directory
	r: ls
	w: touch/mkdir/rmdir/rm
	x: cd
```



#### 4.2.2 其他权限管理**命令**

**chown**(change file) 改变文件或者目录的所有者（只有管理员有权限）

```shell
chown [用户] [文件或目录]
```

**chgrp**(change file group ownership) 改变文件或目录的所属组

```shell
chgrp [用户组] [文件或目录]
```

**umask**(the user file-creaation mask): 显示、设置文件的缺省权限

```shell
umask [-S]
	  -S 以rwx形式显示新建文件缺省权限
	  
	 // 更改默认权限 
	 0022
	 0 特殊权限
	 022 --- -w- -w-
	 777 rwx rwx rwx
	 ----------------逻辑与
	 755 rwx r-x r-x 目录
	     rw- r-- r-- 文件
	 
```

### 4.3 文件搜索命令

注意： 规划好目录，少使用搜索，搜索范围越小越好，搜索条件越精确越好

#### 4.3.1 文件搜索命令find

**find**

```shell
find [搜索范围] [匹配的条件]
				-name 文件名    // 只搜索文件
				-name *文件名*  // 使用通配符 查找文件中带字符串中
				（* 匹配任意字符）
				（?匹配一个字符）
				-iname 文件名   // 搜索的时候不区分大小写
				-size +n（大于）|-n（小于）|n等于  // n 数据块 1 数据块 = 512 字节
				-user 文件名   // 根据文件所有者查找
				-group 文件名 	// 根据文件所属组查找
				-cmin -5  // 根据时间查找 5分钟内被修改过属性的文件和目录;+ 表示超过 
				-amin 访问时间 access
				-cmin 文件属性 change
				-mmin 文件内容 modify
				
				-a // and 两个条件同时满足
				-o // or 两个条件满足一个
				
				-type 根据文件类型查找
					  f 文件  d目录  l软连接文件
				-inum 根据i节点查找
				
				-exec/-ok 命令 {}  \; 对搜索结果执行操作
```



#### 4.3.2 其他文件搜索命令

**locate** 在文件资料库中查找文件

```shell
locate 文件名
updatedb 升级文件库，临时文件不会被收录在 文件资料库中
locate -i 文件名 不区分大小写
```

**which** 搜索命令所在目录以及别名信息

```shell
which 命令
```

**whereis** 搜索命令所在目录以及帮助文档路径

```shell
whereis [命令名称]
```

**grep** 在文件中搜寻字串匹配的并行输出

```shell
grep -iv [指定字串] [文件]
	 -i 不区分大小写
	 -v 排除指定字串（^匹配行首）
```

### 4.4 文件搜索命令-帮助命令

#### 4.4.1  帮助命令

**man** (manual) 获得帮助信息 或者配置文件 （优先是命令的帮助1，5表示配置文件）

```shell
man ls // 查看ls命令的帮助信息 浏览的过程类似 less命令
man services // 查看配置文件services的帮助信息
man 5 passwd // 配置文件的帮助信息
```

**whatis** 得到简短的命令信息

```shell
whatis [命令名称]
```

**apropos** 查看配置文件的信息

```shell
apropos [配置文件]
```

--help 获得用户帮助

**help** 获得shell内置命令的帮助信息(找不到路径的命令都是shell的内置命令)

```shell
help [命令]
```

